(this["webpackJsonptest-admin"]=this["webpackJsonptest-admin"]||[]).push([[0],{332:function(e,a,t){e.exports=t(475)},475:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(14),c=t.n(o),i=t(571),s=t(570),l=t(545),u=t(547),m=t(478),d=function(){return r.a.createElement(l.a,null,r.a.createElement(u.a,{title:"Welcome to Admin Dashboard"}),r.a.createElement(m.a,null,"This is the dashboard area"))},p=t(189),g=t.n(p),f=t(255),h={login:function(){var e=Object(f.a)(g.a.mark((function e(a){var t,n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.username,n=a.password,r=new Request("https://comments-microservice.herokuapp.com/v1/msadmins/login",{method:"POST",body:JSON.stringify({email:t,password:n}),headers:{"Content-Type":"application/json"}}),e.abrupt("return",fetch(r).then((function(e){if(e.status<200||e.status>=300)throw new Error(e.statusText);return e.json()})).then((function(e){var a=e.data;localStorage.setItem("systemToken",a.systemToken)})));case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),logout:function(){return localStorage.removeItem("systemToken"),Promise.resolve()},checkError:function(e){return!e||401!==e.status&&403!==e.status?Promise.resolve():(localStorage.removeItem("systemToken"),Promise.reject())},checkAuth:function(){return localStorage.getItem("systemToken")?Promise.resolve():Promise.reject()},getPermissions:function(){return Promise.resolve()}},E=t(74),b=t(82),v=function(e){return e.records&&Array.isArray(e.records)?e.records.map((function(e){return Object(b.a)({id:e.msAdminId},e)})):e.msAdminId?Object(b.a)({id:e.msAdminId},e):e},w=t(23),O="https://comments-microservice.herokuapp.com/v1",y=function(e){return Object(b.a)({id:e.organizationId},e)},j=function(e,a,t){var n=e;return Array.isArray(e.records)&&e.records[0].organizationId&&(n=e.records.map(y)),a&&t&&(n=n.filter((function(e){return e[a]===t}))),n},P=function(e){return e.organizationId?Object(b.a)({id:e.applicationId,orgId:e.organizationId._id},e):Object(b.a)({id:e.applicationId},e)},I=function(e,a,t){var n=e;return Array.isArray(e.records)&&e.records[0].applicationId&&(n=e.records.map(P),a&&t&&(n=n.filter((function(e){return e[a]._id===t})))),n},D="https://comments-microservice.herokuapp.com/v1",k=function(e,a,t){switch(a){case"Admins":return function(e,a){switch(e){case w.d:return{url:"".concat(O,"/msadmins"),getData:v};case w.g:return{url:"".concat(O,"/msadmins/").concat(a.id),getData:v};case w.e:case w.f:return{url:"".concat(O,"/msadmins"),getData:v};case w.h:return{url:"".concat(O,"/msadmins"),options:{method:"PATCH",body:JSON.stringify(a.data)},getData:v};case w.a:return{url:"".concat(O,"/msadmins/create"),options:{method:"POST",body:JSON.stringify(a.data)},getData:v};case w.b:return{url:"".concat(O,"/msadmins/").concat(a.id),options:{method:"DELETE"},getData:v};default:throw new Error("Unsupported Admin Data Provider request type ".concat(e))}}(e,t);case"Settings":return function(e,a){switch(e){case w.g:return{url:"".concat("https://comments-microservice.herokuapp.com/v1","/msadmins/settings"),getData:function(e){return e}};case w.h:return{url:"".concat("https://comments-microservice.herokuapp.com/v1","/msadmins/settings"),options:{method:"PATCH",body:JSON.stringify(a.data)},getData:function(e){return e}};default:throw new Error("Unsupported Admin Data Provider request type ".concat(e))}}(e,t);case"Organizations":return function(e,a){switch(e){case w.e:case w.d:return{url:"".concat("https://comments-microservice.herokuapp.com/v1","/msadmins/organizations"),getData:j};case w.f:return{url:"".concat("https://comments-microservice.herokuapp.com/v1","/msadmins/organizations"),getData:function(e){return j(e,a.target,a.id)}};case w.g:case w.b:return{url:"".concat("https://comments-microservice.herokuapp.com/v1","/msadmins/organizations/").concat(a.id),getData:j};default:throw new Error("Unsupported Application Data Provider request type ".concat(e))}}(e,t);case"Applications":return function(e,a){switch(e){case w.e:case w.d:return{url:"".concat(D,"/msadmins/applications"),getData:I};case w.f:return{url:"".concat(D,"/msadmins/applications"),getData:function(e){return I(e,a.target,a.id)}};case w.g:case w.b:return{url:"".concat(D,"/msadmins/applications/").concat(a.id),getData:I};case w.c:return{urls:a.ids.map((function(e){return"".concat(D,"/msadmins/applications/").concat(e)})),getData:I};default:throw new Error("Unsupported Application Data Provider request type ".concat(e))}}(e,t);default:return""}},A=t(146),T=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a.headers||(a.headers=new Headers({Accept:"application/json"}));var t=localStorage.getItem("systemToken");return a.headers.set("Authorization","Bearer ".concat(t)),E.a.fetchJson(e,a)},z={authProvider:h,dataProvider:{getList:function(e,a){var t=function(e){var a=e&&e.pagination?e.pagination:{page:1,perPage:10},t=a.page;return{limit:a.perPage,sort:(e&&e.sort?e.sort:{order:"DESC"}).order,page:t}}(a),n=k(w.d,e,a);return T("".concat(n.url,"?").concat(Object(A.stringify)(t))).then((function(e){var a=e.json;return{data:n.getData(a.data),total:a.data.pageInfo.totalRecord}}))},getOne:function(e,a){var t=k(w.g,e,a);return T(t.url).then((function(e){var a=e.json;return{data:t.getData(a.data)}}))},getMany:function(e,a){var t=k(w.e,e,a);return T(t.url).then((function(e){var a=e.json;return{data:t.getData(a.data)}}))},getManyReference:function(e,a){var t=k(w.f,e,a);return T(t.url).then((function(e){var a=e.json;return{data:t.getData(a.data,t.target,t.targetId),total:a.data.pageInfo.totalRecord}}))},update:function(e,a){var t=localStorage.getItem("systemToken"),n=k(w.h,e,a);return t===a.id||t===a.msAdminId?T(n.url,n.options).then((function(e){var a=e.json;return{data:n.getData(a.data)}})):Promise.reject()},updateMany:function(e,a){return Promise.reject()},create:function(e,a){var t=k(w.a,e,a);return T(t.url,{method:"POST",body:JSON.stringify(a.data)}).then((function(e){var a=e.json;return{data:t.getData(a.data)}}))},delete:function(e,a){var t=k(w.b,e,a);T(t.url,{method:"DELETE"}).then((function(e){var a=e.json;return{data:t.getData(a.data)}}))},deleteMany:function(e,a){var t=k(w.c,e,a),n=[];return Promise.all(t.urls.map((function(e){return T(e,{method:"DELETE"}).then((function(e){var a=e.json;return n.push(t.getData(a.data))}))}))).then((function(){return{data:n}}))}}},N=t(479),S=t(573),x=t(579),C=t(572),J=t(562),q=t(587),M=function(e){var a=Object(N.a)((function(e){return e.breakpoints.down("sm")}));return r.a.createElement(S.a,Object.assign({label:"Admins",title:"Admins"},e),a?r.a.createElement(x.a,{linkType:"show",primaryText:function(e){return e.fullname},secondaryText:function(e){return e.email},tertiaryText:function(e){return e.role}}):r.a.createElement(C.a,{rowClick:"show",isRowSelectable:function(e){return!1}},r.a.createElement(J.a,{label:"Name",source:"fullname"}),r.a.createElement(J.a,{label:"ID",source:"id"}),r.a.createElement(q.a,{source:"email"}),r.a.createElement(J.a,{source:"role"})))},R=t(305),L=t(563),U=t(581),B=t(575),F=t(300),H=function(e){return r.a.createElement(R.a,e,r.a.createElement(L.a,null))},W=function(e){return r.a.createElement(U.a,e,r.a.createElement(B.a,{toolbar:r.a.createElement(H,null)},r.a.createElement(F.a,{disabled:!0,source:"id"}),r.a.createElement(F.a,{label:"Full Name",source:"fullname"}),r.a.createElement(F.a,{disabled:!0,source:"email"}),r.a.createElement(F.a,{disabled:!0,source:"role"})))},_=t(589),$=t(275),G=t(567),K=function(e){var a=Object(A.parse)(e.location.search);return console.log("AdminCreate",a),r.a.createElement(_.a,Object.assign({label:"Create",title:"Create an Admin"},e),r.a.createElement(B.a,{redirect:"show"},r.a.createElement(F.a,{label:"Full Name",source:"fullname",validate:[Object($.b)()]}),r.a.createElement(F.a,{source:"email",validate:[Object($.b)()]}),r.a.createElement(G.a,{source:"password",validate:[Object($.b)()]})))},Q=t(77),V=t(568),X=t(580),Y=t(584),Z=t(569),ee=function(e){var a=e.basePath,t=e.data,n=e.resource;return r.a.createElement(Q.a,null,r.a.createElement(V.a,{basePath:a,record:t}),r.a.createElement(X.a,{basePath:a,record:t,resource:n}))},ae=function(e){return r.a.createElement(Y.a,Object.assign({label:"Show",title:"",actions:r.a.createElement(ee,null)},e),r.a.createElement(Z.a,null,r.a.createElement(J.a,{label:"Full Name",source:"fullname"}),r.a.createElement(J.a,{source:"email"}),r.a.createElement(J.a,{source:"password"}),r.a.createElement(J.a,{source:"role"})))},te=t(279),ne={list:M,edit:W,create:K,show:ae,icon:t.n(te).a},re=t(301),oe=function(e){return r.a.createElement(re.a,Object.assign({rowsPerPageOptions:[10,25,50]},e))},ce=function(e){var a=Object(N.a)((function(e){return e.breakpoints.down("sm")}));return r.a.createElement(S.a,Object.assign({label:"Organizations",title:"Organizations",pagination:r.a.createElement(oe,null)},e),a?r.a.createElement(x.a,{linkType:"show",primaryText:function(e){return e.organizationName},secondaryText:function(e){return"".concat(e.organizationId)}}):r.a.createElement(C.a,{rowClick:"show"},r.a.createElement(J.a,{label:"Name",source:"organizationName"}),r.a.createElement(J.a,{label:"ID",source:"id"})))},ie=t(109),se=t(574),le=t(590),ue=t(582),me=Object(ie.a)({root:{color:"#3f51b5"}}),de=function(e){var a=e.basePath,t=e.data,n=e.resource;return r.a.createElement(Q.a,null,r.a.createElement(X.a,{basePath:a,record:t,resource:n}))},pe=function(e){var a=me();return r.a.createElement(Y.a,Object.assign({label:"Show",actions:r.a.createElement(de,null)},e),r.a.createElement(se.a,null,r.a.createElement(le.a,{label:"details"},r.a.createElement(J.a,{label:"ID",source:"organizationId"}),r.a.createElement(J.a,{source:"organizationName"})),r.a.createElement(le.a,{label:"applications"},r.a.createElement(ue.a,{link:"show",label:"",reference:"Applications",target:"organizationId"},r.a.createElement(x.a,{className:a.root,linkType:"show",primaryText:function(e){return e.applicationName}})))))},ge=t(280),fe={list:ce,show:pe,icon:t.n(ge).a},he=t(576),Ee=function(e){return r.a.createElement(re.a,Object.assign({rowsPerPageOptions:[10,25,50]},e))},be=function(e){var a=Object(N.a)((function(e){return e.breakpoints.down("sm")}));return r.a.createElement(S.a,Object.assign({label:"Applications",title:"Applications",pagination:r.a.createElement(Ee,null)},e),a?r.a.createElement(x.a,{linkType:"show",primaryText:function(e){return e.applicationName},secondaryText:function(e){return e.orgId},tertiaryText:function(e){return e.organizationName}}):r.a.createElement(C.a,{rowClick:"show"},r.a.createElement(J.a,{label:"Name",source:"applicationName"}),r.a.createElement(J.a,{label:"ID",source:"id"}),r.a.createElement(he.a,{link:"show",label:"Organization",source:"orgId",reference:"Organizations"},r.a.createElement(J.a,{label:"Organization Name",source:"organizationName"}))))},ve=function(e){var a=e.basePath,t=e.data,n=e.resource;return r.a.createElement(Q.a,null,r.a.createElement(X.a,{basePath:a,record:t,resource:n}))},we=function(e){return r.a.createElement(Y.a,Object.assign({label:"Show",title:"",actions:r.a.createElement(ve,null)},e),r.a.createElement(Z.a,null,r.a.createElement(J.a,{source:"id"}),r.a.createElement(J.a,{label:"Name",source:"applicationName"}),r.a.createElement(J.a,{label:"Organization ID",source:"orgId"}),r.a.createElement(he.a,{link:"show",label:"Organization",source:"orgId",reference:"Organizations"},r.a.createElement(J.a,{source:"organizationName"}))))},Oe=t(284),ye={list:be,show:we,icon:t.n(Oe).a},je=function(e){return r.a.createElement(Y.a,Object.assign({label:"Settings",title:"Settings"},e),r.a.createElement(Z.a,null,r.a.createElement(J.a,{label:"Requests per Minute (max)",source:"maxRequestsPerMin"}),r.a.createElement(J.a,{label:"Items per Page (default)",source:"maxItemsPerPage"}),r.a.createElement(J.a,{label:"Items per Page (max)",source:"defaultItemsPerPage"})))},Pe=t(285),Ie={list:je,show:je,icon:t.n(Pe).a};var De=function(){return r.a.createElement(i.a,Object.assign({dashboard:d},z),r.a.createElement(s.a,Object.assign({name:"Admins"},ne)),r.a.createElement(s.a,Object.assign({name:"Organizations"},fe)),r.a.createElement(s.a,Object.assign({name:"Applications"},ye)),r.a.createElement(s.a,Object.assign({name:"Settings"},Ie)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(De,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[332,1,2]]]);
//# sourceMappingURL=main.4c66533c.chunk.js.map