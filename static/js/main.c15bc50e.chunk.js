(this["webpackJsonptest-admin"]=this["webpackJsonptest-admin"]||[]).push([[0],{322:function(e,t,a){e.exports=a(465)},465:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(13),c=a.n(o),s=a(555),i=a(554),u=a(530),l=a(532),m=a(468),d=function(){return r.a.createElement(u.a,null,r.a.createElement(l.a,{title:"Welcome to Admin Dashboard"}),r.a.createElement(m.a,null,"This is the dashboard area"))},p=a(183),g=a.n(p),f=a(247),h={login:function(){var e=Object(f.a)(g.a.mark((function e(t){var a,n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.username,n=t.password,r=new Request("https://comments-microservice.herokuapp.com/v1/msadmins/login",{method:"POST",body:JSON.stringify({email:a,password:n}),headers:{"Content-Type":"application/json"}}),e.abrupt("return",fetch(r).then((function(e){if(e.status<200||e.status>=300)throw new Error(e.statusText);return e.json()})).then((function(e){var t=e.data;localStorage.setItem("systemToken",t.systemToken)})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),logout:function(){return localStorage.removeItem("systemToken"),Promise.resolve()},checkError:function(e){return!e||401!==e.status&&403!==e.status?Promise.resolve():(localStorage.removeItem("systemToken"),Promise.reject())},checkAuth:function(){return localStorage.getItem("systemToken")?Promise.resolve():Promise.reject()},getPermissions:function(){return Promise.resolve()}},E=a(78),b=a(102),v=function(e){return e.records&&Array.isArray(e.records)?e.records.map((function(e){return Object(b.a)({id:e.msAdminId},e)})):e.msAdminId?Object(b.a)({id:e.msAdminId},e):e},w=a(23),y="https://comments-microservice.herokuapp.com/v1",j=function(e){return e.organizationId?Object(b.a)({id:e.applicationId,orgId:e.organizationId._id},e):Object(b.a)({id:e.applicationId},e)},O=function(e){return e.records&&Array.isArray(e.records)?e.records.map((function(e){return j(e)})):e.applicationId?j(e):e},P=function(e,t,a){switch(t){case"Admins":return function(e,t){switch(e){case w.d:return{url:"".concat(y,"/msadmins"),getData:v};case w.g:return{url:"".concat(y,"/msadmins/").concat(t.id),getData:v};case w.e:case w.f:return{url:"".concat(y,"/msadmins"),getData:v};case w.h:return{url:"".concat(y,"/msadmins"),options:{method:"PATCH",body:JSON.stringify(t.data)},getData:v};case w.a:return{url:"".concat(y,"/msadmins/create"),options:{method:"POST",body:JSON.stringify(t.data)},getData:v};case w.b:return{url:"".concat(y,"/msadmins/").concat(t.id),options:{method:"DELETE"},getData:v};default:throw new Error("Unsupported Admin Data Provider request type ".concat(e))}}(e,a);case"Settings":return function(e,t){switch(e){case w.g:return{url:"".concat("https://comments-microservice.herokuapp.com/v1","/msadmins/settings"),getData:function(e){return e}};case w.h:return{url:"".concat("https://comments-microservice.herokuapp.com/v1","/msadmins/settings"),options:{method:"PATCH",body:JSON.stringify(t.data)},getData:function(e){return e}};default:throw new Error("Unsupported Admin Data Provider request type ".concat(e))}}(e,a);case"Applications":return function(e,t){switch(e){case w.e:case w.f:case w.d:return{url:"".concat("https://comments-microservice.herokuapp.com/v1","/msadmins/applications"),getData:O};case w.g:case w.b:return{url:"".concat("https://comments-microservice.herokuapp.com/v1","/msadmins/applications/").concat(t.id),getData:O};case w.c:return{urls:t.ids.map((function(e){return"".concat("https://comments-microservice.herokuapp.com/v1","/msadmins/applications/").concat(e)})),getData:O};default:throw new Error("Unsupported Application Data Provider request type ".concat(e))}}(e,a);default:return""}},D=a(111),A=function(e){var t=e&&e.pagination?e.pagination:{page:1,perPage:10},a=t.page;return{limit:t.perPage,sort:(e&&e.sort?e.sort:{order:"DESC"}).order,page:a}},I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.headers||(t.headers=new Headers({Accept:"application/json"}));var a=localStorage.getItem("systemToken");return t.headers.set("Authorization","Bearer ".concat(a)),E.a.fetchJson(e,t)},k={authProvider:h,dataProvider:{getList:function(e,t){var a=A(t),n=P(w.d,e,t);return I("".concat(n.url,"?").concat(Object(D.stringify)(a))).then((function(e){var t=e.json;return{data:n.getData(t.data),total:t.data.pageInfo.totalRecord}}))},getOne:function(e,t){var a=P(w.g,e,t);return I(a.url).then((function(e){var t=e.json;return{data:a.getData(t.data)}}))},getMany:function(e,t){var a=P(w.e,e,t);return I(a.url).then((function(e){var t=e.json;return{data:a.getData(t.data)}}))},getManyReference:function(e,t){var a=A(t),n=P(w.f,e,t);return I("".concat(n.url,"?").concat(Object(D.stringify)(a))).then((function(e){var t=e.json;return{data:n.getData(t.data),total:t.data.pageInfo.totalRecord}}))},update:function(e,t){var a=localStorage.getItem("systemToken"),n=P(w.h,e,t);return a===t.id||a===t.msAdminId?I(n.url,n.options).then((function(e){var t=e.json;return{data:n.getData(t.data)}})):Promise.reject()},updateMany:function(e,t){return Promise.reject()},create:function(e,t){var a=P(w.a,e,t);return I(a.url,{method:"POST",body:JSON.stringify(t.data)}).then((function(e){var t=e.json;return{data:a.getData(t.data)}}))},delete:function(e,t){var a=P(w.b,e,t);I(a.url,{method:"DELETE"}).then((function(e){var t=e.json;return{data:a.getData(t.data)}}))},deleteMany:function(e,t){var a=P(w.c,e,t),n=[];return Promise.all(a.urls.map((function(e){return I(e,{method:"DELETE"}).then((function(e){var t=e.json;return n.push(a.getData(t.data))}))}))).then((function(){return{data:n}}))}}},T=a(469),S=a(558),N=a(563),x=a(556),z=a(547),C=a(568),J=function(e){var t=Object(T.a)((function(e){return e.breakpoints.down("sm")}));return r.a.createElement(S.a,Object.assign({label:"Admins",title:"Admins"},e),t?r.a.createElement(N.a,{primaryText:function(e){return e.fullname},secondaryText:function(e){return e.email},tertiaryText:function(e){return e.role}}):r.a.createElement(x.a,{rowClick:"show",isRowSelectable:function(e){return!1}},r.a.createElement(z.a,{source:"id"}),r.a.createElement(z.a,{source:"fullname"}),r.a.createElement(C.a,{source:"email"}),r.a.createElement(z.a,{source:"role"})))},M=a(564),R=a(557),q=a(293),L=function(e){return r.a.createElement(M.a,e,r.a.createElement(R.a,null,r.a.createElement(q.a,{disabled:!0,source:"id"}),r.a.createElement(q.a,{label:"Full Name",source:"fullname"}),r.a.createElement(q.a,{disabled:!0,source:"email"}),r.a.createElement(q.a,{disabled:!0,source:"role"})))},B=a(570),F=a(268),H=a(552),U=function(e){var t=Object(D.parse)(e.location.search);return console.log("AdminCreate",t),r.a.createElement(B.a,Object.assign({label:"Create",title:"Create an Admin"},e),r.a.createElement(R.a,{redirect:"show"},r.a.createElement(q.a,{label:"Full Name",source:"fullname",validate:[Object(F.b)()]}),r.a.createElement(q.a,{source:"email",validate:[Object(F.b)()]}),r.a.createElement(H.a,{source:"password",validate:[Object(F.b)()]})))},W=a(565),$=a(553),_=function(e){return r.a.createElement(W.a,Object.assign({label:"Show",title:""},e),r.a.createElement($.a,null,r.a.createElement(z.a,{label:"Full Name",source:"fullname"}),r.a.createElement(z.a,{source:"email"}),r.a.createElement(z.a,{source:"password"}),r.a.createElement(z.a,{source:"role"})))},G=a(272),K={list:J,edit:L,create:U,show:_,icon:a.n(G).a},Q=a(292),V=a(560),X=function(e){return r.a.createElement(Q.a,Object.assign({rowsPerPageOptions:[10,25,50]},e))},Y=function(e){var t=Object(T.a)((function(e){return e.breakpoints.down("sm")}));return r.a.createElement(S.a,Object.assign({label:"Applications",title:"Applications",pagination:r.a.createElement(X,null)},e),t?r.a.createElement(N.a,{primaryText:function(e){return e.applicationName},secondaryText:function(e){return e.orgId},tertiaryText:function(e){return e.organizationName}}):r.a.createElement(x.a,{rowClick:"show"},r.a.createElement(z.a,{source:"id"}),r.a.createElement(z.a,{label:"Name",source:"applicationName"}),r.a.createElement(V.a,{label:"Organization",source:"orgId",reference:"Organizations"},r.a.createElement(z.a,{source:"organizationName"}))))},Z=function(e){return r.a.createElement(W.a,Object.assign({label:"Show",title:""},e),r.a.createElement($.a,null,r.a.createElement(z.a,{source:"id"}),r.a.createElement(z.a,{label:"Name",source:"applicationName"}),r.a.createElement(z.a,{label:"Organization ID",source:"orgId"}),r.a.createElement(z.a,{label:"Organization Name",source:"organizationName"})))},ee=a(276),te={list:Y,show:Z,icon:a.n(ee).a},ae=function(e){return r.a.createElement(W.a,Object.assign({label:"Settings",title:"Settings"},e),r.a.createElement($.a,null,r.a.createElement(z.a,{label:"Requests per Minute (max)",source:"maxRequestsPerMin"}),r.a.createElement(z.a,{label:"Items per Page (default)",source:"maxItemsPerPage"}),r.a.createElement(z.a,{label:"Items per Page (max)",source:"defaultItemsPerPage"})))},ne=a(277),re={list:ae,show:ae,icon:a.n(ne).a};var oe=function(){return r.a.createElement(s.a,Object.assign({dashboard:d},k),r.a.createElement(i.a,Object.assign({name:"Admins"},K)),r.a.createElement(i.a,Object.assign({name:"Applications"},te)),r.a.createElement(i.a,Object.assign({name:"Settings"},re)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(oe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[322,1,2]]]);
//# sourceMappingURL=main.c15bc50e.chunk.js.map