(this["webpackJsonptest-admin"]=this["webpackJsonptest-admin"]||[]).push([[0],{338:function(e,t,a){e.exports=a(481)},481:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),o=a.n(c),i=a(576),s=a(575),l=a(550),u=a(551),m=a(578),d=a(552),p=a(51),f=a(98),g=a(154),E=a.n(g),b=a(14),h=a(56),v=a.n(h),O=a(79),j=a(68),w=a(113),y=Object(w.a)({root:{textDecoration:"none"}}),P=function(e){var t=y(),a=function(){var e=Object(n.useState)(0),t=Object(p.a)(e,2),a=t[0],r=t[1],c=Object(j.a)();return Object(n.useEffect)((function(){(function(){var e=Object(O.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.getList("Admins");case 2:t=e.sent,a=t.total,r(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a,c]),[a]}(),c=Object(p.a)(a,1)[0];return r.a.createElement(l.a,{variant:"outlined"},r.a.createElement(b.a,{to:"/Admins",className:t.root},r.a.createElement(m.a,{display:"flex",justifyContent:"space-between",p:2},r.a.createElement(E.a,{color:"action"}),r.a.createElement(m.a,{textAlign:"right"},r.a.createElement(f.a,{color:"textPrimary"},"Admins"),r.a.createElement(m.a,{mx:2}),r.a.createElement(f.a,{color:"textSecondary",variant:"h4"},c)))))},x=a(156),A=a.n(x),D=Object(w.a)({root:{textDecoration:"none"}}),k=function(e){var t=D(),a=function(){var e=Object(n.useState)(0),t=Object(p.a)(e,2),a=t[0],r=t[1],c=Object(j.a)();return Object(n.useEffect)((function(){(function(){var e=Object(O.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.getList("Applications");case 2:t=e.sent,a=t.total,r(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a,c]),[a]}(),c=Object(p.a)(a,1)[0];return r.a.createElement(l.a,{variant:"outlined"},r.a.createElement(b.a,{to:"/Applications",className:t.root},r.a.createElement(m.a,{display:"flex",justifyContent:"space-between",p:2},r.a.createElement(A.a,{color:"action"}),r.a.createElement(m.a,{textAlign:"right"},r.a.createElement(f.a,{color:"textPrimary"},"Applications"),r.a.createElement(m.a,{mx:2}),r.a.createElement(f.a,{color:"textSecondary",variant:"h4"},c)))))},I=a(157),z=a.n(I),S=Object(w.a)({root:{textDecoration:"none"}}),T=function(e){var t=S(),a=function(){var e=Object(n.useState)(0),t=Object(p.a)(e,2),a=t[0],r=t[1],c=Object(j.a)();return Object(n.useEffect)((function(){(function(){var e=Object(O.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.getList("Organizations");case 2:t=e.sent,a=t.total,r(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a,c]),[a]}(),c=Object(p.a)(a,1)[0];return r.a.createElement(l.a,{variant:"outlined"},r.a.createElement(b.a,{to:"/Organizations",className:t.root},r.a.createElement(m.a,{display:"flex",justifyContent:"space-between",p:2},r.a.createElement(z.a,{color:"action"}),r.a.createElement(m.a,{textAlign:"right"},r.a.createElement(f.a,{color:"textPrimary"},"Organizations"),r.a.createElement(m.a,{mx:2}),r.a.createElement(f.a,{color:"textSecondary",variant:"h4"},c)))))},N=function(){return r.a.createElement(l.a,null,r.a.createElement(u.a,{title:"Welcome to Admin Dashboard"}),r.a.createElement(m.a,{p:2},r.a.createElement(d.a,{container:!0,spacing:2},r.a.createElement(d.a,{item:!0,xs:12,sm:6,md:4},r.a.createElement(P,null)),r.a.createElement(d.a,{item:!0,xs:12,sm:6,md:4},r.a.createElement(k,null)),r.a.createElement(d.a,{item:!0,xs:12,sm:6,md:4},r.a.createElement(T,null)))))},C={login:function(){var e=Object(O.a)(v.a.mark((function e(t){var a,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.username,n=t.password,r=new Request("https://comments-microservice.herokuapp.com/v1/msadmins/login",{method:"POST",body:JSON.stringify({email:a,password:n}),headers:{"Content-Type":"application/json"}}),e.abrupt("return",fetch(r).then((function(e){if(e.status<200||e.status>=300)throw new Error(e.statusText);return e.json()})).then((function(e){var t=e.data;localStorage.setItem("systemToken",t.systemToken)})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),logout:function(){return localStorage.removeItem("systemToken"),Promise.resolve()},checkError:function(e){return!e||401!==e.status&&403!==e.status?Promise.resolve():(localStorage.removeItem("systemToken"),Promise.reject())},checkAuth:function(){return localStorage.getItem("systemToken")?Promise.resolve():Promise.reject()},getPermissions:function(){return Promise.resolve()}},F=a(77),J=a(87),q=function(e){return e.records&&Array.isArray(e.records)?e.records.map((function(e){return Object(J.a)({id:e.msAdminId},e)})):e.msAdminId?Object(J.a)({id:e.msAdminId},e):e},L=a(23),M="https://comments-microservice.herokuapp.com/v1",R=function(e){return Object(J.a)({id:e.organizationId},e)},U=function(e,t,a){var n=e;return Array.isArray(e.records)&&e.records[0].organizationId&&(n=e.records.map(R)),t&&a&&(n=n.filter((function(e){return e[t]===a}))),n},B=function(e){return e.organizationId?Object(J.a)({id:e.applicationId,orgId:e.organizationId._id},e):Object(J.a)({id:e.applicationId},e)},H=function(e,t,a){var n=e;return Array.isArray(e.records)&&e.records[0].applicationId&&(n=e.records.map(B),t&&a&&(n=n.filter((function(e){return e[t]._id===a})))),n},W="https://comments-microservice.herokuapp.com/v1",_=function(e,t,a){switch(t){case"Admins":return function(e,t){switch(e){case L.d:return{url:"".concat(M,"/msadmins"),getData:q};case L.g:return{url:"".concat(M,"/msadmins/").concat(t.id),getData:q};case L.e:case L.f:return{url:"".concat(M,"/msadmins"),getData:q};case L.h:return{url:"".concat(M,"/msadmins"),options:{method:"PATCH",body:JSON.stringify(t.data)},getData:q};case L.a:return{url:"".concat(M,"/msadmins/create"),options:{method:"POST",body:JSON.stringify(t.data)},getData:q};case L.b:return{url:"".concat(M,"/msadmins/").concat(t.id),options:{method:"DELETE"},getData:q};default:throw new Error("Unsupported Admin Data Provider request type ".concat(e))}}(e,a);case"Settings":return function(e,t){switch(e){case L.g:return{url:"".concat("https://comments-microservice.herokuapp.com/v1","/msadmins/settings"),getData:function(e){return e}};case L.h:return{url:"".concat("https://comments-microservice.herokuapp.com/v1","/msadmins/settings"),options:{method:"PATCH",body:JSON.stringify(t.data)},getData:function(e){return e}};default:throw new Error("Unsupported Admin Data Provider request type ".concat(e))}}(e,a);case"Organizations":return function(e,t){switch(e){case L.e:case L.d:return{url:"".concat("https://comments-microservice.herokuapp.com/v1","/msadmins/organizations"),getData:U};case L.f:return{url:"".concat("https://comments-microservice.herokuapp.com/v1","/msadmins/organizations"),getData:function(e){return U(e,t.target,t.id)}};case L.g:case L.b:return{url:"".concat("https://comments-microservice.herokuapp.com/v1","/msadmins/organizations/").concat(t.id),getData:U};default:throw new Error("Unsupported Application Data Provider request type ".concat(e))}}(e,a);case"Applications":return function(e,t){switch(e){case L.e:case L.d:return{url:"".concat(W,"/msadmins/applications"),getData:H};case L.f:return{url:"".concat(W,"/msadmins/applications"),getData:function(e){return H(e,t.target,t.id)}};case L.g:case L.b:return{url:"".concat(W,"/msadmins/applications/").concat(t.id),getData:H};case L.c:return{urls:t.ids.map((function(e){return"".concat(W,"/msadmins/applications/").concat(e)})),getData:H};default:throw new Error("Unsupported Application Data Provider request type ".concat(e))}}(e,a);default:return""}},$=a(158),G=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.headers||(t.headers=new Headers({Accept:"application/json"}));var a=localStorage.getItem("systemToken");return t.headers.set("Authorization","Bearer ".concat(a)),F.a.fetchJson(e,t)},K={authProvider:C,dataProvider:{getList:function(e,t){var a=function(e){var t=e&&e.pagination?e.pagination:{page:1,perPage:10},a=t.page;return{limit:t.perPage,sort:(e&&e.sort?e.sort:{order:"DESC"}).order,page:a}}(t),n=_(L.d,e,t);return G("".concat(n.url,"?").concat(Object($.stringify)(a))).then((function(e){var t=e.json;return{data:n.getData(t.data),total:t.data.pageInfo.totalRecord}}))},getOne:function(e,t){var a=_(L.g,e,t);return G(a.url).then((function(e){var t=e.json;return{data:a.getData(t.data)}}))},getMany:function(e,t){var a=_(L.e,e,t);return G(a.url).then((function(e){var t=e.json;return{data:a.getData(t.data)}}))},getManyReference:function(e,t){var a=_(L.f,e,t);return G(a.url).then((function(e){var t=e.json;return{data:a.getData(t.data,a.target,a.targetId),total:t.data.pageInfo.totalRecord}}))},update:function(e,t){var a=localStorage.getItem("systemToken"),n=_(L.h,e,t);return a===t.id||a===t.msAdminId?G(n.url,n.options).then((function(e){var t=e.json;return{data:n.getData(t.data)}})):Promise.reject()},updateMany:function(e,t){return Promise.reject()},create:function(e,t){var a=_(L.a,e,t);return G(a.url,{method:"POST",body:JSON.stringify(t.data)}).then((function(e){var t=e.json;return{data:a.getData(t.data)}}))},delete:function(e,t){var a=_(L.b,e,t);G(a.url,{method:"DELETE"}).then((function(e){var t=e.json;return{data:a.getData(t.data)}}))},deleteMany:function(e,t){var a=_(L.c,e,t),n=[];return Promise.all(a.urls.map((function(e){return G(e,{method:"DELETE"}).then((function(e){var t=e.json;return n.push(a.getData(t.data))}))}))).then((function(){return{data:n}}))}}},Q=a(484),V=a(579),X=a(585),Y=a(577),Z=a(567),ee=a(593),te=function(e){var t=Object(Q.a)((function(e){return e.breakpoints.down("sm")}));return r.a.createElement(V.a,Object.assign({label:"Admins",title:"Admins"},e),t?r.a.createElement(X.a,{linkType:"show",primaryText:function(e){return e.fullname},secondaryText:function(e){return e.email},tertiaryText:function(e){return e.role}}):r.a.createElement(Y.a,{rowClick:"show",isRowSelectable:function(e){return!1}},r.a.createElement(Z.a,{label:"Name",source:"fullname"}),r.a.createElement(Z.a,{label:"ID",source:"id"}),r.a.createElement(ee.a,{source:"email"}),r.a.createElement(Z.a,{source:"role"})))},ae=a(308),ne=a(568),re=a(587),ce=a(581),oe=a(303),ie=function(e){return r.a.createElement(ae.a,e,r.a.createElement(ne.a,null))},se=function(e){return r.a.createElement(re.a,e,r.a.createElement(ce.a,{toolbar:r.a.createElement(ie,null)},r.a.createElement(oe.a,{disabled:!0,source:"id"}),r.a.createElement(oe.a,{label:"Full Name",source:"fullname"}),r.a.createElement(oe.a,{disabled:!0,source:"email"}),r.a.createElement(oe.a,{disabled:!0,source:"role"})))},le=a(595),ue=a(281),me=a(572),de=function(e){var t=Object($.parse)(e.location.search);return console.log("AdminCreate",t),r.a.createElement(le.a,Object.assign({label:"Create",title:"Create an Admin"},e),r.a.createElement(ce.a,{redirect:"show"},r.a.createElement(oe.a,{label:"Full Name",source:"fullname",validate:[Object(ue.b)()]}),r.a.createElement(oe.a,{source:"email",validate:[Object(ue.b)()]}),r.a.createElement(me.a,{source:"password",validate:[Object(ue.b)()]})))},pe=a(83),fe=a(573),ge=a(586),Ee=a(590),be=a(574),he=function(e){var t=e.basePath,a=e.data,n=e.resource;return r.a.createElement(pe.a,null,r.a.createElement(fe.a,{basePath:t,record:a}),r.a.createElement(ge.a,{basePath:t,record:a,resource:n}))},ve={list:te,edit:se,create:de,show:function(e){return r.a.createElement(Ee.a,Object.assign({label:"Show",title:"",actions:r.a.createElement(he,null)},e),r.a.createElement(be.a,null,r.a.createElement(Z.a,{label:"Full Name",source:"fullname"}),r.a.createElement(Z.a,{source:"email"}),r.a.createElement(Z.a,{source:"password"}),r.a.createElement(Z.a,{source:"role"})))},icon:E.a},Oe=a(304),je=function(e){return r.a.createElement(Oe.a,Object.assign({rowsPerPageOptions:[10,25,50]},e))},we=function(e){var t=Object(Q.a)((function(e){return e.breakpoints.down("sm")}));return r.a.createElement(V.a,Object.assign({label:"Organizations",title:"Organizations",pagination:r.a.createElement(je,null)},e),t?r.a.createElement(X.a,{linkType:"show",primaryText:function(e){return e.organizationName},secondaryText:function(e){return"".concat(e.organizationId)}}):r.a.createElement(Y.a,{rowClick:"show"},r.a.createElement(Z.a,{label:"Name",source:"organizationName"}),r.a.createElement(Z.a,{label:"ID",source:"id"})))},ye=a(580),Pe=a(596),xe=a(588),Ae=Object(w.a)({root:{color:"#3f51b5"}}),De=function(e){var t=e.basePath,a=e.data,n=e.resource;return r.a.createElement(pe.a,null,r.a.createElement(ge.a,{basePath:t,record:a,resource:n}))},ke={list:we,show:function(e){var t=Ae();return r.a.createElement(Ee.a,Object.assign({label:"Show",actions:r.a.createElement(De,null)},e),r.a.createElement(ye.a,null,r.a.createElement(Pe.a,{label:"details"},r.a.createElement(Z.a,{label:"ID",source:"organizationId"}),r.a.createElement(Z.a,{source:"organizationName"})),r.a.createElement(Pe.a,{label:"applications"},r.a.createElement(xe.a,{link:"show",label:"",reference:"Applications",target:"organizationId"},r.a.createElement(X.a,{className:t.root,linkType:"show",primaryText:function(e){return e.applicationName}})))))},icon:z.a},Ie=a(582),ze=function(e){return r.a.createElement(Oe.a,Object.assign({rowsPerPageOptions:[10,25,50]},e))},Se=function(e){var t=e.basePath,a=e.data,n=e.resource;return r.a.createElement(pe.a,null,r.a.createElement(ge.a,{basePath:t,record:a,resource:n}))},Te={list:function(e){var t=Object(Q.a)((function(e){return e.breakpoints.down("sm")}));return r.a.createElement(V.a,Object.assign({label:"Applications",title:"Applications",pagination:r.a.createElement(ze,null)},e),t?r.a.createElement(X.a,{linkType:"show",primaryText:function(e){return e.applicationName},secondaryText:function(e){return e.orgId},tertiaryText:function(e){return e.organizationName}}):r.a.createElement(Y.a,{rowClick:"show"},r.a.createElement(Z.a,{label:"Name",source:"applicationName"}),r.a.createElement(Z.a,{label:"ID",source:"id"}),r.a.createElement(Ie.a,{link:"show",label:"Organization",source:"orgId",reference:"Organizations"},r.a.createElement(Z.a,{label:"Organization Name",source:"organizationName"}))))},show:function(e){return r.a.createElement(Ee.a,Object.assign({label:"Show",title:"",actions:r.a.createElement(Se,null)},e),r.a.createElement(be.a,null,r.a.createElement(Z.a,{source:"id"}),r.a.createElement(Z.a,{label:"Name",source:"applicationName"}),r.a.createElement(Z.a,{label:"Organization ID",source:"orgId"}),r.a.createElement(Ie.a,{link:"show",label:"Organization",source:"orgId",reference:"Organizations"},r.a.createElement(Z.a,{source:"organizationName"}))))},icon:A.a},Ne=function(e){return r.a.createElement(Ee.a,Object.assign({label:"Settings",title:"Settings"},e),r.a.createElement(be.a,null,r.a.createElement(Z.a,{label:"Requests per Minute (max)",source:"maxRequestsPerMin"}),r.a.createElement(Z.a,{label:"Items per Page (default)",source:"maxItemsPerPage"}),r.a.createElement(Z.a,{label:"Items per Page (max)",source:"defaultItemsPerPage"})))},Ce=a(288),Fe={list:Ne,show:Ne,icon:a.n(Ce).a},Je=a(302),qe=Object(Je.a)({palette:{primary:{main:"#FFFFFF"},secondary:{main:"#2339FF"}}});var Le=function(){return r.a.createElement(i.a,Object.assign({theme:qe,dashboard:N},K),r.a.createElement(s.a,Object.assign({name:"Admins"},ve)),r.a.createElement(s.a,Object.assign({name:"Organizations"},ke)),r.a.createElement(s.a,Object.assign({name:"Applications"},Te)),r.a.createElement(s.a,Object.assign({name:"Settings"},Fe)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Le,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[338,1,2]]]);
//# sourceMappingURL=main.f00a1073.chunk.js.map